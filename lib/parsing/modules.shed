module shed.compiler.parsing.modules;

members {
    moduleRule
}

import options;

import lop.rules;

import shed.compiler.nodes;

def moduleRule fun(statementRule: Rule[StatementNode]) =>
    rules.sequence()
        .capture(rules.zeroOrMore(statementRule))
        .next(rules.tokenOfType("end"))
        .map(fun(statements: List[StatementNode]) =>
            nodes.moduleNode(options.none, emptyList, statements));
